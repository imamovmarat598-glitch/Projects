# Drug Monitor Compact

Компактная система мониторинга новостей - **12 нод** вместо 226.

## Архитектура

```
СБОРЩИК (каждый час):
Trigger → Parse All RSS (188) → Filter 6h → Store

ПРОЦЕССОР (каждые 6 часов):
Trigger → Read & Dedupe → AI Analyze → Telegram → Clear
```

## Как работает

1. **Каждый час** - один Code node парсит все 188 RSS источников параллельно (батчами по 30)
2. Новости фильтруются (только за 6 часов) и сохраняются в `staticData`
3. **Каждые 6 часов** - процессор читает все накопленное, дедуплицирует, анализирует AI и отправляет в Telegram

## Преимущества

| Было | Стало |
|------|-------|
| 226 нод | **12 нод** |
| 188 RSS нод | **1 Code node** |
| Сложная структура | **Простая линейная** |

## Технические детали

**Parse All RSS** - Code node который:
- Содержит список всех 188 URL
- Парсит их параллельно (батчи по 30)
- Использует регулярные выражения для извлечения данных
- Timeout 10 сек на источник

**staticData** - персистентное хранилище n8n между запусками

## Установка

1. Импортировать `workflow.json` в n8n
2. Настроить credentials: OpenAI + Telegram
3. Активировать

## Стоимость

~$3-4/месяц (4 AI запроса в день)

## Файлы

```
drug-monitor/
├── workflow.json   # 30KB - 12 нод, 188 источников
└── README.md
```
