# üöÄ –°–¢–ê–†–¢ –ú–û–î–ï–†–ù–ò–ó–ê–¶–ò–ò: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

## üìç –í—ã –∑–¥–µ—Å—å

–£ –≤–∞—Å –µ—Å—Ç—å —Ä–∞–±–æ—á–∏–π City Travel Bot —Å –±–∞–∑–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º.

–°–µ–π—á–∞—Å –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ).

**–¶–µ–ª—å:** –ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –≤ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—É—é AI-–ø–ª–∞—Ç—Ñ–æ—Ä–º—É —Å –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–µ–π.

---

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

–Ø –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –¥–ª—è –≤–∞—Å:

### 1. **Google Sheets Service** ‚úÖ
   - –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ PostgreSQL
   - 4 —Ç–∞–±–ª–∏—Ü—ã: Users, History, Favorites, Preferences
   - –§–∞–π–ª: [src/services/googleSheets.service.ts](src/services/googleSheets.service.ts)

### 2. **–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** ‚úÖ
   - [GOOGLE_SHEETS_SETUP.md](GOOGLE_SHEETS_SETUP.md) - –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
   - [–ü–û–°–õ–ï_–ü–û–õ–£–ß–ï–ù–ò–Ø_CREDENTIALS.md](–ü–û–°–õ–ï_–ü–û–õ–£–ß–ï–ù–ò–Ø_CREDENTIALS.md) - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
   - [N8N_AUTOMATION_PLAN.md](N8N_AUTOMATION_PLAN.md) - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
   - [AI_PERSONALIZATION_PLAN.md](AI_PERSONALIZATION_PLAN.md) - AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   - [PAYMENT_SBP_PLAN.md](PAYMENT_SBP_PLAN.md) - –ü–ª–∞—Ç–µ–∂–∏ –°–ë–ü
   - [ROADMAP_MODERNIZATION.md](ROADMAP_MODERNIZATION.md) - –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥** ‚úÖ
   - `package.json` - –¥–æ–±–∞–≤–ª–µ–Ω—ã googleapis, google-auth-library
   - `.env.example` - –¥–æ–±–∞–≤–ª–µ–Ω GOOGLE_SHEETS_ID
   - `.gitignore` - credentials.json –∑–∞—â–∏—â–µ–Ω

---

## üéØ –®–ê–ì 1: –°–æ–∑–¥–∞–π—Ç–µ Google Cloud –ø—Ä–æ–µ–∫—Ç (15 –º–∏–Ω—É—Ç)

### 1.1 –û—Ç–∫—Ä–æ–π—Ç–µ Google Cloud Console
üëâ https://console.cloud.google.com/

### 1.2 –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
1. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç"**
2. –ù–∞–∑–≤–∞–Ω–∏–µ: `city-travel-bot`
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å"**

### 1.3 –í–∫–ª—é—á–∏—Ç–µ Google Sheets API
1. –ú–µ–Ω—é ‚Üí **"API –∏ —Å–µ—Ä–≤–∏—Å—ã"** ‚Üí **"–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞"**
2. –ù–∞–π–¥–∏—Ç–µ **"Google Sheets API"**
3. –ù–∞–∂–º–∏—Ç–µ **"–í–∫–ª—é—á–∏—Ç—å"**

### 1.4 –°–æ–∑–¥–∞–π—Ç–µ Service Account
1. **"API –∏ —Å–µ—Ä–≤–∏—Å—ã"** ‚Üí **"–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"**
2. **"–°–æ–∑–¥–∞—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"** ‚Üí **"–ê–∫–∫–∞—É–Ω—Ç —Å–µ—Ä–≤–∏—Å–∞"**
3. –ò–º—è: `city-travel-bot-service`
4. –†–æ–ª—å: **"–†–µ–¥–∞–∫—Ç–æ—Ä"**
5. –ù–∞–∂–º–∏—Ç–µ **"–ì–æ—Ç–æ–≤–æ"**

### 1.5 –°–æ–∑–¥–∞–π—Ç–µ JSON-–∫–ª—é—á
1. –ù–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π Service Account
2. –¢—Ä–∏ —Ç–æ—á–∫–∏ (‚ãÆ) ‚Üí **"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏"**
3. **"–î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á"** ‚Üí **"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á"**
4. –§–æ—Ä–º–∞—Ç: **JSON**
5. –§–∞–π–ª `credentials.json` —Å–∫–∞—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 1.6 –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ credentials.json
```bash
# –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
city-travel-bot/
  credentials.json  ‚Üê –ó–î–ï–°–¨ (—Ä—è–¥–æ–º —Å package.json)
```

---

## üéØ –®–ê–ì 2: –°–æ–∑–¥–∞–π—Ç–µ Google –¢–∞–±–ª–∏—Ü—É (5 –º–∏–Ω—É—Ç)

### 2.1 –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://sheets.google.com/
2. **"–°–æ–∑–¥–∞—Ç—å"** ‚Üí **"–ü—É—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞"**
3. –ù–∞–∑–≤–∞–Ω–∏–µ: `City Travel Bot - Database`

### 2.2 –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã
–ò–∑ URL –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã:
```
https://docs.google.com/spreadsheets/d/1a2b3c4d5e6f7g8h9i0j/edit
                                      ^^^^^^^^^^^^^^^^^^^^
                                      –≠—Ç–æ –≤–∞—à ID
```

### 2.3 –î–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø Service Account
1. –û—Ç–∫—Ä–æ–π—Ç–µ `credentials.json`
2. –ù–∞–π–¥–∏—Ç–µ `"client_email": "..."`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç email
4. –í Google –¢–∞–±–ª–∏—Ü–µ: **"–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ—Å—Ç—É–ø"**
5. –í—Å—Ç–∞–≤—å—Ç–µ email, –ø—Ä–∞–≤–∞ **"–†–µ–¥–∞–∫—Ç–æ—Ä"**
6. –£–±–µ—Ä–∏—Ç–µ ‚òëÔ∏è "–£–≤–µ–¥–æ–º–∏—Ç—å –ª—é–¥–µ–π"
7. **"–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"**

---

## üéØ –®–ê–ì 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env (2 –º–∏–Ω—É—Ç—ã)

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ:

```env
# Google Sheets
GOOGLE_SHEETS_ID=–≤–∞—à_id_—Ç–∞–±–ª–∏—Ü—ã_—Å—é–¥–∞
```

–ü—Ä–∏–º–µ—Ä:
```env
GOOGLE_SHEETS_ID=1a2b3c4d5e6f7g8h9i0j
```

---

## üéØ –®–ê–ì 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ (2 –º–∏–Ω—É—Ç—ã)

```bash
cd city-travel-bot

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
npm run build

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ
npm run dev
```

### ‚úÖ –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

```
‚úÖ Google Sheets –ø–æ–¥–∫–ª—é—á–µ–Ω
üìã –°–æ–∑–¥–∞–Ω –ª–∏—Å—Ç: Users
üìã –°–æ–∑–¥–∞–Ω –ª–∏—Å—Ç: History
üìã –°–æ–∑–¥–∞–Ω –ª–∏—Å—Ç: Favorites
üìã –°–æ–∑–¥–∞–Ω –ª–∏—Å—Ç: Preferences
‚úÖ Bot launched successfully
‚úÖ City Travel Bot is running!
```

### ‚úÖ –í Google –¢–∞–±–ª–∏—Ü–µ –ø–æ—è–≤—è—Ç—Å—è 4 –ª–∏—Å—Ç–∞:
- **Users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∏
- **History** - –∏—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–æ–≤
- **Favorites** - –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞
- **Preferences** - –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è

---

## üéØ –®–ê–ì 5: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ (1 –º–∏–Ω—É—Ç–∞)

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
4. –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥
5. –ü–æ–ª—É—á–∏—Ç–µ –∞—Ñ–∏—à—É

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:**
- –û—Ç–∫—Ä–æ–π—Ç–µ Google –¢–∞–±–ª–∏—Ü—É
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –ª–∏—Å—Ç **"Users"**
- –í—ã —É–≤–∏–¥–∏—Ç–µ —Å–≤–æ—é –∑–∞–ø–∏—Å—å —Å Telegram ID

---

## üéâ –ì–û–¢–û–í–û! –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –≠—Ç–∞–ø 1 –∑–∞–≤–µ—Ä—à–µ–Ω ‚úÖ
–ë–æ—Ç —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ Google Sheets –≤–º–µ—Å—Ç–æ –ø–∞–º—è—Ç–∏!

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

#### 1. N8N –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π
- –£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

üëâ –ß–∏—Ç–∞–π—Ç–µ: [N8N_AUTOMATION_PLAN.md](N8N_AUTOMATION_PLAN.md)

#### 2. AI-–ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (–¥–ª—è Premium —Ñ—É–Ω–∫—Ü–∏–π)
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –æ—Ç –æ—Ç–µ–ª—è
- –£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
- –ê–Ω–∞–ª–∏–∑ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π

üëâ –ß–∏—Ç–∞–π—Ç–µ: [AI_PERSONALIZATION_PLAN.md](AI_PERSONALIZATION_PLAN.md)

#### 3. –ü–ª–∞—Ç–µ–∂–∏ –°–ë–ü (–¥–ª—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏)
- –ü—Ä–∏–µ–º –æ–ø–ª–∞—Ç—ã –∑–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- Premium –∏ VIP —Ç–∞—Ä–∏—Ñ—ã
- –ù–∏–∑–∫–∏–µ –∫–æ–º–∏—Å—Å–∏–∏ (0.5%)

üëâ –ß–∏—Ç–∞–π—Ç–µ: [PAYMENT_SBP_PLAN.md](PAYMENT_SBP_PLAN.md)

---

## ‚ùì –ü—Ä–æ–±–ª–µ–º—ã?

### –û—à–∏–±–∫–∞: "credentials.json –Ω–µ –Ω–∞–π–¥–µ–Ω"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (—Ä—è–¥–æ–º —Å package.json)

### –û—à–∏–±–∫–∞: "403 Forbidden"
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ Service Account email –≤ –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ

### –û—à–∏–±–∫–∞: "Cannot find module googleapis"
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm install`

### –í —Ç–∞–±–ª–∏—Ü–µ –Ω–µ—Ç –ª–∏—Å—Ç–æ–≤
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ GOOGLE_SHEETS_ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [GOOGLE_SHEETS_SETUP.md](GOOGLE_SHEETS_SETUP.md) - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- [ROADMAP_MODERNIZATION.md](ROADMAP_MODERNIZATION.md) - –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è

---

## üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏

```
–≠—Ç–∞–ø 1: Google Sheets        [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë] 80% ‚Üê –í–´ –ó–î–ï–°–¨
–≠—Ç–∞–ø 2: N8N Automation        [‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë]  0%
–≠—Ç–∞–ø 3: AI Personalization    [‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë]  0%
–≠—Ç–∞–ø 4: Payment (–°–ë–ü)         [‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë]  0%
–≠—Ç–∞–ø 5: Advanced Features     [‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë]  0%
```

**–û—Å—Ç–∞–ª–æ—Å—å:** –ü–æ–ª—É—á–∏—Ç—å credentials.json –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞!

---

<div align="center">

# üöÄ –ù–ê–ß–ù–ò–¢–ï –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°!

**–®–∞–≥ 1:** –û—Ç–∫—Ä–æ–π—Ç–µ https://console.cloud.google.com/

**–®–∞–≥ 2:** –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏ —Å–∫–∞—á–∞–π—Ç–µ credentials.json

**–®–∞–≥ 3:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm install && npm run dev`

**‚úÖ –ß–µ—Ä–µ–∑ 25 –º–∏–Ω—É—Ç —É –≤–∞—Å –±—É–¥–µ—Ç –±–æ—Ç —Å Google Sheets!**

</div>
