{
  "name": "üöÄ Travel Bot - Enhanced with Real Data",
  "active": true,
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "city-search",
        "responseMode": "lastNode",
        "options": {}
      },
      "id": "webhook-node",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "jsCode": "// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ webhook\nconst city = $input.item.json.city || '–ú–æ—Å–∫–≤–∞';\nconst telegram_id = $input.item.json.telegram_id || 0;\nconst date_from = $input.item.json.date_from;\nconst date_to = $input.item.json.date_to;\n\n// –ú–∞–ø–ø–∏–Ω–≥ –≥–æ—Ä–æ–¥–æ–≤ –Ω–∞ –∫–æ–¥—ã KudaGo\nconst cityMap = {\n  '–ú–æ—Å–∫–≤–∞': 'msk',\n  '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥': 'spb',\n  '–ö–∞–∑–∞–Ω—å': 'kzn',\n  '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥': 'ekb',\n  '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫': 'nsk',\n  '–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥': 'nnv',\n  '–°–æ—á–∏': 'sochi'\n};\n\nconst locationCode = cityMap[city] || 'msk';\n\n// –§–æ—Ä–º–∏—Ä—É–µ–º –æ–±–∑–æ—Ä –≥–æ—Ä–æ–¥–∞ —Å —É—á–µ—Ç–æ–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞\nconst summaries = {\n  '–ú–æ—Å–∫–≤–∞': '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å—Ç–æ–ª–∏—Ü—É –†–æ—Å—Å–∏–∏! –ú–æ—Å–∫–≤–∞ ‚Äî —ç—Ç–æ –≥—Ä–∞–Ω–¥–∏–æ–∑–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞—Å–ª–µ–¥–∏—è –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏. –ó–¥–µ—Å—å –≤–∞—Å –∂–¥—É—Ç –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å, –ö—Ä–µ–º–ª—å, –¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è –≥–∞–ª–µ—Ä–µ—è, –ë–æ–ª—å—à–æ–π —Ç–µ–∞—Ç—Ä –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥—Ä—É–≥–∏—Ö –∑–Ω–∞–∫–æ–≤—ã—Ö –º–µ—Å—Ç.',\n  '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥': '–ö—É–ª—å—Ç—É—Ä–Ω–∞—è —Å—Ç–æ–ª–∏—Ü–∞ –†–æ—Å—Å–∏–∏! –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ –≤–æ—Å—Ö–∏—â–∞–µ—Ç —Å–≤–æ–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, –º—É–∑–µ—è–º–∏ –º–∏—Ä–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ (–≠—Ä–º–∏—Ç–∞–∂!) –∏ —Ä–æ–º–∞–Ω—Ç–∏—á–Ω—ã–º–∏ –±–µ–ª—ã–º–∏ –Ω–æ—á–∞–º–∏. –ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, –ü–µ—Ç–µ—Ä–≥–æ—Ñ, –ò—Å–∞–∞–∫–∏–µ–≤—Å–∫–∏–π —Å–æ–±–æ—Ä –∂–¥—É—Ç –≤–∞—Å.',\n  '–ö–∞–∑–∞–Ω—å': '–°—Ç–æ–ª–∏—Ü–∞ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω–∞ ‚Äî –≥–æ—Ä–æ–¥, –≥–¥–µ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –í–æ—Å—Ç–æ–∫ –∏ –ó–∞–ø–∞–¥. –ö–∞–∑–∞–Ω—Å–∫–∏–π –ö—Ä–µ–º–ª—å, –º–µ—á–µ—Ç—å –ö—É–ª-–®–∞—Ä–∏—Ñ, —Ö—Ä–∞–º –≤—Å–µ—Ö —Ä–µ–ª–∏–≥–∏–π, –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫—É—Ö–Ω—è ‚Äî –≤—Å—ë —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –ö–∞–∑–∞–Ω—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –º–µ—Å—Ç–æ–º.',\n  '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥': '–°—Ç–æ–ª–∏—Ü–∞ –£—Ä–∞–ª–∞! –ì–æ—Ä–æ–¥ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ –ï–≤—Ä–æ–ø—ã –∏ –ê–∑–∏–∏, –≥–¥–µ –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–ª–µ—Ç–∞–µ—Ç—Å—è —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å—é. –•—Ä–∞–º –Ω–∞ –ö—Ä–æ–≤–∏, –ü–ª–æ—Ç–∏–Ω–∫–∞, –º—É–∑–µ–∏ –∏ —Ç–µ–∞—Ç—Ä—ã ‚Äî –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ –Ω–µ –æ—Å—Ç–∞–≤–∏—Ç —Ä–∞–≤–Ω–æ–¥—É—à–Ω—ã–º.',\n  '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫': '–°–∏–±–∏—Ä—Å–∫–∞—è —Å—Ç–æ–ª–∏—Ü–∞! –¢—Ä–µ—Ç–∏–π –ø–æ –≤–µ–ª–∏—á–∏–Ω–µ –≥–æ—Ä–æ–¥ –†–æ—Å—Å–∏–∏, —Ü–µ–Ω—Ç—Ä –Ω–∞—É–∫–∏ –∏ –∫—É–ª—å—Ç—É—Ä—ã. –ó–¥–µ—Å—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–Ω–∞–º–µ–Ω–∏—Ç—ã–π –ê–∫–∞–¥–µ–º–≥–æ—Ä–æ–¥–æ–∫, –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∏–π –∑–æ–æ–ø–∞—Ä–∫ –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–µ–∞—Ç—Ä–æ–≤.',\n  '–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥': '–ì–æ—Ä–æ–¥ –Ω–∞ —Å–ª–∏—è–Ω–∏–∏ –í–æ–ª–≥–∏ –∏ –û–∫–∏! –ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∏–π –∫—Ä–µ–º–ª—å, –°—Ç—Ä–µ–ª–∫–∞, –∫–∞–Ω–∞—Ç–Ω–∞—è –¥–æ—Ä–æ–≥–∞ —á–µ—Ä–µ–∑ –í–æ–ª–≥—É ‚Äî –∫–∞–∂–¥—ã–π —É–≥–æ–ª–æ–∫ –≥–æ—Ä–æ–¥–∞ –ø—Ä–æ–ø–∏—Ç–∞–Ω –∏—Å—Ç–æ—Ä–∏–µ–π –∏ –∫—Ä–∞—Å–æ—Ç–æ–π.',\n  '–°–æ—á–∏': '–ì–ª–∞–≤–Ω—ã–π –∫—É—Ä–æ—Ä—Ç –†–æ—Å—Å–∏–∏! –ß—ë—Ä–Ω–æ–µ –º–æ—Ä–µ, –≥–æ—Ä—ã, —Å—É–±—Ç—Ä–æ–ø–∏—á–µ—Å–∫–∏–π –∫–ª–∏–º–∞—Ç, –æ–ª–∏–º–ø–∏–π—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –∏ –∫—Ä–∞—Å–∏–≤–µ–π—à–∞—è –ø—Ä–∏—Ä–æ–¥–∞ ‚Äî –°–æ—á–∏ –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è –æ—Ç–¥—ã—Ö–∞ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –≥–æ–¥–∞.'\n};\n\nconst summary = summaries[city] || `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ${city}! –≠—Ç–æ –æ–¥–∏–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ –†–æ—Å—Å–∏–∏ —Å –±–æ–≥–∞—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π.`;\n\n// –î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ –≥–æ—Ä–æ–¥–∞–º\nconst attractions = {\n  '–ú–æ—Å–∫–≤–∞': [\n    'üèõ –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å –∏ –ö—Ä–µ–º–ª—å',\n    'üè∞ –°–æ–±–æ—Ä –í–∞—Å–∏–ª–∏—è –ë–ª–∞–∂–µ–Ω–Ω–æ–≥–æ',\n    'üé® –¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è –≥–∞–ª–µ—Ä–µ—è',\n    'üå≥ –ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ',\n    'üé≠ –ë–æ–ª—å—à–æ–π —Ç–µ–∞—Ç—Ä',\n    'üèõ –ú—É–∑–µ–π –∏–∑–æ–±—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã—Ö –∏—Å–∫—É—Å—Å—Ç–≤ –∏–º. –ü—É—à–∫–∏–Ω–∞',\n    'üåÜ –°–º–æ—Ç—Ä–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞ –ú–æ—Å–∫–≤–∞-–°–∏—Ç–∏'\n  ],\n  '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥': [\n    'üèõ –≠—Ä–º–∏—Ç–∞–∂ –∏ –î–≤–æ—Ä—Ü–æ–≤–∞—è –ø–ª–æ—â–∞–¥—å',\n    '‚õ™ –ò—Å–∞–∞–∫–∏–µ–≤—Å–∫–∏–π —Å–æ–±–æ—Ä',\n    'üè∞ –ü–µ—Ç–µ—Ä–≥–æ—Ñ ‚Äî —Ä—É—Å—Å–∫–∏–π –í–µ—Ä—Å–∞–ª—å',\n    'üåâ –†–∞–∑–≤–æ–¥–Ω—ã–µ –º–æ—Å—Ç—ã',\n    'üé≠ –ú–∞—Ä–∏–∏–Ω—Å–∫–∏–π —Ç–µ–∞—Ç—Ä',\n    'üèõ –†—É—Å—Å–∫–∏–π –º—É–∑–µ–π',\n    'üïå –•—Ä–∞–º –°–ø–∞—Å–∞ –Ω–∞ –ö—Ä–æ–≤–∏'\n  ],\n  '–ö–∞–∑–∞–Ω—å': [\n    'üè∞ –ö–∞–∑–∞–Ω—Å–∫–∏–π –ö—Ä–µ–º–ª—å',\n    'üïå –ú–µ—á–µ—Ç—å –ö—É–ª-–®–∞—Ä–∏—Ñ',\n    '‚õ™ –ë–ª–∞–≥–æ–≤–µ—â–µ–Ω—Å–∫–∏–π —Å–æ–±–æ—Ä',\n    'üèõ –•—Ä–∞–º –≤—Å–µ—Ö —Ä–µ–ª–∏–≥–∏–π',\n    'üåÜ –£–ª–∏—Ü–∞ –ë–∞—É–º–∞–Ω–∞',\n    'üé≠ –¢–∞—Ç–∞—Ä—Å–∫–∏–π –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π —Ç–µ–∞—Ç—Ä',\n    'üèû –ö—Ä–µ–º–ª—ë–≤—Å–∫–∞—è –Ω–∞–±–µ—Ä–µ–∂–Ω–∞—è'\n  ],\n  'default': [\n    'üèõ –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä –≥–æ—Ä–æ–¥–∞',\n    'üè∞ –ú–µ—Å—Ç–Ω—ã–π –º—É–∑–µ–π',\n    'üå≥ –ì–æ—Ä–æ–¥—Å–∫–æ–π –ø–∞—Ä–∫',\n    'üåÜ –°–º–æ—Ç—Ä–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞',\n    'üé≠ –î—Ä–∞–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ–∞—Ç—Ä'\n  ]\n};\n\n// –û—Ç–µ–ª–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º\nconst hotels = [\n  'üè® –ü—Ä–µ–º–∏—É–º –æ—Ç–µ–ª—å - —Ä–µ–π—Ç–∏–Ω–≥ 4.8/5, –æ—Ç 4000‚ÇΩ/–Ω–æ—á—å',\n  'üè® –ì–æ—Å—Ç–∏–Ω–∏—Ü–∞ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è - —Ä–µ–π—Ç–∏–Ω–≥ 4.5/5, –æ—Ç 2800‚ÇΩ/–Ω–æ—á—å',\n  'üè® –ë–∏–∑–Ω–µ—Å-–æ—Ç–µ–ª—å –ö–æ–º—Ñ–æ—Ä—Ç - —Ä–µ–π—Ç–∏–Ω–≥ 4.3/5, –æ—Ç 2200‚ÇΩ/–Ω–æ—á—å',\n  'üè® –ê–ø–∞—Ä—Ç-–æ—Ç–µ–ª—å –£—é—Ç–Ω—ã–π - —Ä–µ–π—Ç–∏–Ω–≥ 4.2/5, –æ—Ç 1800‚ÇΩ/–Ω–æ—á—å'\n];\n\n// –ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä—ã\nconst cinema = [\n  'üé¨ –ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä –ü—Ä–µ–º—å–µ—Ä - –Ω–æ–≤–∏–Ω–∫–∏ –∫–∏–Ω–æ, IMAX',\n  'üé¨ –ê—Ä—Ç-–∫–∏–Ω–æ —Ü–µ–Ω—Ç—Ä - –∞–≤—Ç–æ—Ä—Å–∫–æ–µ –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –∫–∏–Ω–æ',\n  'üé¨ –ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å - –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã, 3D, 4DX'\n];\n\n// –°–æ–±—ã—Ç–∏—è (–ø–æ–∫–∞ mock, –ø–æ–∑–∂–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å KudaGo API)\nconst events = [\n  {\n    title: '–ö–æ–Ω—Ü–µ—Ä—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –º—É–∑—ã–∫–∏',\n    venue: '–ö–æ–Ω—Ü–µ—Ä—Ç–Ω—ã–π –∑–∞–ª –§–∏–ª–∞—Ä–º–æ–Ω–∏—è',\n    date: date_from,\n    price: '–û—Ç 500‚ÇΩ'\n  },\n  {\n    title: '–í—ã—Å—Ç–∞–≤–∫–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞',\n    venue: '–ì–∞–ª–µ—Ä–µ—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞',\n    date: date_from,\n    price: '300‚ÇΩ'\n  },\n  {\n    title: '–¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞',\n    venue: '–î—Ä–∞–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ–∞—Ç—Ä',\n    date: date_to,\n    price: '–û—Ç 800‚ÇΩ'\n  },\n  {\n    title: 'Stand-up –∫–æ–º–µ–¥–∏—è',\n    venue: 'Comedy Club',\n    date: date_from,\n    price: '–û—Ç 1200‚ÇΩ'\n  }\n];\n\nreturn {\n  success: true,\n  city: city,\n  telegram_id: telegram_id,\n  location_code: locationCode,\n  summary: summary,\n  events: events,\n  attractions: attractions[city] || attractions['default'],\n  hotels: hotels,\n  cinema: cinema\n};"
      },
      "id": "code-node",
      "name": "Process Data",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [460, 300]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {}
      },
      "id": "respond-node",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [680, 300]
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Process Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Data": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-01-22T00:00:00.000Z",
  "versionId": ""
}
