{
  "name": "ðŸš€ Travel Bot - With KudaGo API",
  "active": false,
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "city-search",
        "responseMode": "lastNode",
        "options": {}
      },
      "id": "webhook-node",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [240, 400],
      "webhookId": "city-search"
    },
    {
      "parameters": {
        "jsCode": "// ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· webhook\nconst city = $input.item.json.city || 'ÐœÐ¾ÑÐºÐ²Ð°';\nconst telegram_id = $input.item.json.telegram_id || 0;\nconst date_from = $input.item.json.date_from;\nconst date_to = $input.item.json.date_to;\n\n// ÐœÐ°Ð¿Ð¿Ð¸Ð½Ð³ Ð³Ð¾Ñ€Ð¾Ð´Ð¾Ð² Ð½Ð° ÐºÐ¾Ð´Ñ‹ KudaGo\nconst cityMap = {\n  'ÐœÐ¾ÑÐºÐ²Ð°': 'msk',\n  'Ð¡Ð°Ð½ÐºÑ‚-ÐŸÐµÑ‚ÐµÑ€Ð±ÑƒÑ€Ð³': 'spb',\n  'ÐšÐ°Ð·Ð°Ð½ÑŒ': 'kzn',\n  'Ð•ÐºÐ°Ñ‚ÐµÑ€Ð¸Ð½Ð±ÑƒÑ€Ð³': 'ekb',\n  'ÐÐ¾Ð²Ð¾ÑÐ¸Ð±Ð¸Ñ€ÑÐº': 'nsk',\n  'ÐÐ¸Ð¶Ð½Ð¸Ð¹ ÐÐ¾Ð²Ð³Ð¾Ñ€Ð¾Ð´': 'nnv',\n  'Ð¡Ð¾Ñ‡Ð¸': 'sochi'\n};\n\nconst locationCode = cityMap[city] || 'msk';\n\n// Ð¤Ð¾Ñ€Ð¼Ð¸Ñ€ÑƒÐµÐ¼ Ð¾Ð±Ð·Ð¾Ñ€ Ð³Ð¾Ñ€Ð¾Ð´Ð°\nconst summaries = {\n  'ÐœÐ¾ÑÐºÐ²Ð°': 'Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² ÑÑ‚Ð¾Ð»Ð¸Ñ†Ñƒ Ð Ð¾ÑÑÐ¸Ð¸! ÐœÐ¾ÑÐºÐ²Ð° â€” ÑÑ‚Ð¾ Ð³Ñ€Ð°Ð½Ð´Ð¸Ð¾Ð·Ð½Ð¾Ðµ ÑÐ¾Ñ‡ÐµÑ‚Ð°Ð½Ð¸Ðµ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð½Ð°ÑÐ»ÐµÐ´Ð¸Ñ Ð¸ ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸. Ð—Ð´ÐµÑÑŒ Ð²Ð°Ñ Ð¶Ð´ÑƒÑ‚ ÐšÑ€Ð°ÑÐ½Ð°Ñ Ð¿Ð»Ð¾Ñ‰Ð°Ð´ÑŒ, ÐšÑ€ÐµÐ¼Ð»ÑŒ, Ð¢Ñ€ÐµÑ‚ÑŒÑÐºÐ¾Ð²ÑÐºÐ°Ñ Ð³Ð°Ð»ÐµÑ€ÐµÑ, Ð‘Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ñ‚ÐµÐ°Ñ‚Ñ€ Ð¸ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð·Ð½Ð°ÐºÐ¾Ð²Ñ‹Ñ… Ð¼ÐµÑÑ‚.',\n  'Ð¡Ð°Ð½ÐºÑ‚-ÐŸÐµÑ‚ÐµÑ€Ð±ÑƒÑ€Ð³': 'ÐšÑƒÐ»ÑŒÑ‚ÑƒÑ€Ð½Ð°Ñ ÑÑ‚Ð¾Ð»Ð¸Ñ†Ð° Ð Ð¾ÑÑÐ¸Ð¸! Ð¡Ð°Ð½ÐºÑ‚-ÐŸÐµÑ‚ÐµÑ€Ð±ÑƒÑ€Ð³ Ð²Ð¾ÑÑ…Ð¸Ñ‰Ð°ÐµÑ‚ ÑÐ²Ð¾ÐµÐ¹ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð¾Ð¹, Ð¼ÑƒÐ·ÐµÑÐ¼Ð¸ Ð¼Ð¸Ñ€Ð¾Ð²Ð¾Ð³Ð¾ ÐºÐ»Ð°ÑÑÐ° (Ð­Ñ€Ð¼Ð¸Ñ‚Ð°Ð¶!) Ð¸ Ñ€Ð¾Ð¼Ð°Ð½Ñ‚Ð¸Ñ‡Ð½Ñ‹Ð¼Ð¸ Ð±ÐµÐ»Ñ‹Ð¼Ð¸ Ð½Ð¾Ñ‡Ð°Ð¼Ð¸. ÐÐµÐ²ÑÐºÐ¸Ð¹ Ð¿Ñ€Ð¾ÑÐ¿ÐµÐºÑ‚, ÐŸÐµÑ‚ÐµÑ€Ð³Ð¾Ñ„, Ð˜ÑÐ°Ð°ÐºÐ¸ÐµÐ²ÑÐºÐ¸Ð¹ ÑÐ¾Ð±Ð¾Ñ€ Ð¶Ð´ÑƒÑ‚ Ð²Ð°Ñ.',\n  'ÐšÐ°Ð·Ð°Ð½ÑŒ': 'Ð¡Ñ‚Ð¾Ð»Ð¸Ñ†Ð° Ð¢Ð°Ñ‚Ð°Ñ€ÑÑ‚Ð°Ð½Ð° â€” Ð³Ð¾Ñ€Ð¾Ð´, Ð³Ð´Ðµ Ð²ÑÑ‚Ñ€ÐµÑ‡Ð°ÑŽÑ‚ÑÑ Ð’Ð¾ÑÑ‚Ð¾Ðº Ð¸ Ð—Ð°Ð¿Ð°Ð´. ÐšÐ°Ð·Ð°Ð½ÑÐºÐ¸Ð¹ ÐšÑ€ÐµÐ¼Ð»ÑŒ, Ð¼ÐµÑ‡ÐµÑ‚ÑŒ ÐšÑƒÐ»-Ð¨Ð°Ñ€Ð¸Ñ„, Ñ…Ñ€Ð°Ð¼ Ð²ÑÐµÑ… Ñ€ÐµÐ»Ð¸Ð³Ð¸Ð¹, Ð½Ð°Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð°Ñ ÐºÑƒÑ…Ð½Ñ â€” Ð²ÑÑ‘ ÑÑ‚Ð¾ Ð´ÐµÐ»Ð°ÐµÑ‚ ÐšÐ°Ð·Ð°Ð½ÑŒ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¼ Ð¼ÐµÑÑ‚Ð¾Ð¼.',\n  'Ð•ÐºÐ°Ñ‚ÐµÑ€Ð¸Ð½Ð±ÑƒÑ€Ð³': 'Ð¡Ñ‚Ð¾Ð»Ð¸Ñ†Ð° Ð£Ñ€Ð°Ð»Ð°! Ð“Ð¾Ñ€Ð¾Ð´ Ð½Ð° Ð³Ñ€Ð°Ð½Ð¸Ñ†Ðµ Ð•Ð²Ñ€Ð¾Ð¿Ñ‹ Ð¸ ÐÐ·Ð¸Ð¸, Ð³Ð´Ðµ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¿ÐµÑ€ÐµÐ¿Ð»ÐµÑ‚Ð°ÐµÑ‚ÑÑ Ñ ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒÑŽ. Ð¥Ñ€Ð°Ð¼ Ð½Ð° ÐšÑ€Ð¾Ð²Ð¸, ÐŸÐ»Ð¾Ñ‚Ð¸Ð½ÐºÐ°, Ð¼ÑƒÐ·ÐµÐ¸ Ð¸ Ñ‚ÐµÐ°Ñ‚Ñ€Ñ‹ â€” Ð•ÐºÐ°Ñ‚ÐµÑ€Ð¸Ð½Ð±ÑƒÑ€Ð³ Ð½Ðµ Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ Ñ€Ð°Ð²Ð½Ð¾Ð´ÑƒÑˆÐ½Ñ‹Ð¼.',\n  'ÐÐ¾Ð²Ð¾ÑÐ¸Ð±Ð¸Ñ€ÑÐº': 'Ð¡Ð¸Ð±Ð¸Ñ€ÑÐºÐ°Ñ ÑÑ‚Ð¾Ð»Ð¸Ñ†Ð°! Ð¢Ñ€ÐµÑ‚Ð¸Ð¹ Ð¿Ð¾ Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð½Ðµ Ð³Ð¾Ñ€Ð¾Ð´ Ð Ð¾ÑÑÐ¸Ð¸, Ñ†ÐµÐ½Ñ‚Ñ€ Ð½Ð°ÑƒÐºÐ¸ Ð¸ ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ñ‹. Ð—Ð´ÐµÑÑŒ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð·Ð½Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ñ‹Ð¹ ÐÐºÐ°Ð´ÐµÐ¼Ð³Ð¾Ñ€Ð¾Ð´Ð¾Ðº, ÐÐ¾Ð²Ð¾ÑÐ¸Ð±Ð¸Ñ€ÑÐºÐ¸Ð¹ Ð·Ð¾Ð¾Ð¿Ð°Ñ€Ðº Ð¸ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾ Ñ‚ÐµÐ°Ñ‚Ñ€Ð¾Ð².',\n  'ÐÐ¸Ð¶Ð½Ð¸Ð¹ ÐÐ¾Ð²Ð³Ð¾Ñ€Ð¾Ð´': 'Ð“Ð¾Ñ€Ð¾Ð´ Ð½Ð° ÑÐ»Ð¸ÑÐ½Ð¸Ð¸ Ð’Ð¾Ð»Ð³Ð¸ Ð¸ ÐžÐºÐ¸! ÐÐ¸Ð¶ÐµÐ³Ð¾Ñ€Ð¾Ð´ÑÐºÐ¸Ð¹ ÐºÑ€ÐµÐ¼Ð»ÑŒ, Ð¡Ñ‚Ñ€ÐµÐ»ÐºÐ°, ÐºÐ°Ð½Ð°Ñ‚Ð½Ð°Ñ Ð´Ð¾Ñ€Ð¾Ð³Ð° Ñ‡ÐµÑ€ÐµÐ· Ð’Ð¾Ð»Ð³Ñƒ â€” ÐºÐ°Ð¶Ð´Ñ‹Ð¹ ÑƒÐ³Ð¾Ð»Ð¾Ðº Ð³Ð¾Ñ€Ð¾Ð´Ð° Ð¿Ñ€Ð¾Ð¿Ð¸Ñ‚Ð°Ð½ Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÐµÐ¹ Ð¸ ÐºÑ€Ð°ÑÐ¾Ñ‚Ð¾Ð¹.',\n  'Ð¡Ð¾Ñ‡Ð¸': 'Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ ÐºÑƒÑ€Ð¾Ñ€Ñ‚ Ð Ð¾ÑÑÐ¸Ð¸! Ð§Ñ‘Ñ€Ð½Ð¾Ðµ Ð¼Ð¾Ñ€Ðµ, Ð³Ð¾Ñ€Ñ‹, ÑÑƒÐ±Ñ‚Ñ€Ð¾Ð¿Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÐºÐ»Ð¸Ð¼Ð°Ñ‚, Ð¾Ð»Ð¸Ð¼Ð¿Ð¸Ð¹ÑÐºÐ¸Ðµ Ð¾Ð±ÑŠÐµÐºÑ‚Ñ‹ Ð¸ ÐºÑ€Ð°ÑÐ¸Ð²ÐµÐ¹ÑˆÐ°Ñ Ð¿Ñ€Ð¸Ñ€Ð¾Ð´Ð° â€” Ð¡Ð¾Ñ‡Ð¸ Ð¸Ð´ÐµÐ°Ð»ÐµÐ½ Ð´Ð»Ñ Ð¾Ñ‚Ð´Ñ‹Ñ…Ð° Ð² Ð»ÑŽÐ±Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð³Ð¾Ð´Ð°.'\n};\n\nconst summary = summaries[city] || `Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² ${city}! Ð­Ñ‚Ð¾ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ñ‹Ñ… Ð³Ð¾Ñ€Ð¾Ð´Ð¾Ð² Ð Ð¾ÑÑÐ¸Ð¸ Ñ Ð±Ð¾Ð³Ð°Ñ‚Ð¾Ð¹ Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÐµÐ¹ Ð¸ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾Ð¼ Ð´Ð¾ÑÑ‚Ð¾Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÐµÐ¹.`;\n\n// Ð”Ð¾ÑÑ‚Ð¾Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ð¿Ð¾ Ð³Ð¾Ñ€Ð¾Ð´Ð°Ð¼\nconst attractions = {\n  'ÐœÐ¾ÑÐºÐ²Ð°': ['ðŸ› ÐšÑ€Ð°ÑÐ½Ð°Ñ Ð¿Ð»Ð¾Ñ‰Ð°Ð´ÑŒ Ð¸ ÐšÑ€ÐµÐ¼Ð»ÑŒ', 'ðŸ° Ð¡Ð¾Ð±Ð¾Ñ€ Ð’Ð°ÑÐ¸Ð»Ð¸Ñ Ð‘Ð»Ð°Ð¶ÐµÐ½Ð½Ð¾Ð³Ð¾', 'ðŸŽ¨ Ð¢Ñ€ÐµÑ‚ÑŒÑÐºÐ¾Ð²ÑÐºÐ°Ñ Ð³Ð°Ð»ÐµÑ€ÐµÑ', 'ðŸŒ³ ÐŸÐ°Ñ€Ðº Ð“Ð¾Ñ€ÑŒÐºÐ¾Ð³Ð¾', 'ðŸŽ­ Ð‘Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ñ‚ÐµÐ°Ñ‚Ñ€', 'ðŸ› ÐœÑƒÐ·ÐµÐ¹ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð·Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¸ÑÐºÑƒÑÑÑ‚Ð² Ð¸Ð¼. ÐŸÑƒÑˆÐºÐ¸Ð½Ð°', 'ðŸŒ† Ð¡Ð¼Ð¾Ñ‚Ñ€Ð¾Ð²Ð°Ñ Ð¿Ð»Ð¾Ñ‰Ð°Ð´ÐºÐ° ÐœÐ¾ÑÐºÐ²Ð°-Ð¡Ð¸Ñ‚Ð¸'],\n  'Ð¡Ð°Ð½ÐºÑ‚-ÐŸÐµÑ‚ÐµÑ€Ð±ÑƒÑ€Ð³': ['ðŸ› Ð­Ñ€Ð¼Ð¸Ñ‚Ð°Ð¶ Ð¸ Ð”Ð²Ð¾Ñ€Ñ†Ð¾Ð²Ð°Ñ Ð¿Ð»Ð¾Ñ‰Ð°Ð´ÑŒ', 'â›ª Ð˜ÑÐ°Ð°ÐºÐ¸ÐµÐ²ÑÐºÐ¸Ð¹ ÑÐ¾Ð±Ð¾Ñ€', 'ðŸ° ÐŸÐµÑ‚ÐµÑ€Ð³Ð¾Ñ„ â€” Ñ€ÑƒÑÑÐºÐ¸Ð¹ Ð’ÐµÑ€ÑÐ°Ð»ÑŒ', 'ðŸŒ‰ Ð Ð°Ð·Ð²Ð¾Ð´Ð½Ñ‹Ðµ Ð¼Ð¾ÑÑ‚Ñ‹', 'ðŸŽ­ ÐœÐ°Ñ€Ð¸Ð¸Ð½ÑÐºÐ¸Ð¹ Ñ‚ÐµÐ°Ñ‚Ñ€', 'ðŸ› Ð ÑƒÑÑÐºÐ¸Ð¹ Ð¼ÑƒÐ·ÐµÐ¹', 'ðŸ•Œ Ð¥Ñ€Ð°Ð¼ Ð¡Ð¿Ð°ÑÐ° Ð½Ð° ÐšÑ€Ð¾Ð²Ð¸'],\n  'ÐšÐ°Ð·Ð°Ð½ÑŒ': ['ðŸ° ÐšÐ°Ð·Ð°Ð½ÑÐºÐ¸Ð¹ ÐšÑ€ÐµÐ¼Ð»ÑŒ', 'ðŸ•Œ ÐœÐµÑ‡ÐµÑ‚ÑŒ ÐšÑƒÐ»-Ð¨Ð°Ñ€Ð¸Ñ„', 'â›ª Ð‘Ð»Ð°Ð³Ð¾Ð²ÐµÑ‰ÐµÐ½ÑÐºÐ¸Ð¹ ÑÐ¾Ð±Ð¾Ñ€', 'ðŸ› Ð¥Ñ€Ð°Ð¼ Ð²ÑÐµÑ… Ñ€ÐµÐ»Ð¸Ð³Ð¸Ð¹', 'ðŸŒ† Ð£Ð»Ð¸Ñ†Ð° Ð‘Ð°ÑƒÐ¼Ð°Ð½Ð°', 'ðŸŽ­ Ð¢Ð°Ñ‚Ð°Ñ€ÑÐºÐ¸Ð¹ Ð°ÐºÐ°Ð´ÐµÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ‚ÐµÐ°Ñ‚Ñ€', 'ðŸž ÐšÑ€ÐµÐ¼Ð»Ñ‘Ð²ÑÐºÐ°Ñ Ð½Ð°Ð±ÐµÑ€ÐµÐ¶Ð½Ð°Ñ'],\n  'Ð•ÐºÐ°Ñ‚ÐµÑ€Ð¸Ð½Ð±ÑƒÑ€Ð³': ['â›ª Ð¥Ñ€Ð°Ð¼ Ð½Ð° ÐšÑ€Ð¾Ð²Ð¸', 'ðŸŒ† ÐŸÐ»Ð¾Ñ‚Ð¸Ð½ÐºÐ° Ð³Ð¾Ñ€Ð¾Ð´ÑÐºÐ¾Ð³Ð¾ Ð¿Ñ€ÑƒÐ´Ð°', 'ðŸ› ÐœÑƒÐ·ÐµÐ¹ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸ Ð•ÐºÐ°Ñ‚ÐµÑ€Ð¸Ð½Ð±ÑƒÑ€Ð³Ð°', 'ðŸŽ­ Ð¢ÐµÐ°Ñ‚Ñ€ Ð¾Ð¿ÐµÑ€Ñ‹ Ð¸ Ð±Ð°Ð»ÐµÑ‚Ð°', 'ðŸ—¿ Ð“Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð•Ð²Ñ€Ð¾Ð¿Ð°-ÐÐ·Ð¸Ñ', 'ðŸ° Ð”Ð¾Ð¼ Ð¡ÐµÐ²Ð°ÑÑ‚ÑŒÑÐ½Ð¾Ð²Ð°', 'ðŸŒ³ ÐŸÐ°Ñ€Ðº Ð¥Ð°Ñ€Ð¸Ñ‚Ð¾Ð½Ð¾Ð²Ð°-Ð Ð°ÑÑ‚Ð¾Ñ€Ð³ÑƒÐµÐ²Ð°'],\n  'ÐÐ¾Ð²Ð¾ÑÐ¸Ð±Ð¸Ñ€ÑÐº': ['ðŸŽ­ Ð¢ÐµÐ°Ñ‚Ñ€ Ð¾Ð¿ÐµÑ€Ñ‹ Ð¸ Ð±Ð°Ð»ÐµÑ‚Ð°', 'ðŸ› ÐšÑ€Ð°ÐµÐ²ÐµÐ´Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¼ÑƒÐ·ÐµÐ¹', 'ðŸŒ‰ Ð‘ÑƒÐ³Ñ€Ð¸Ð½ÑÐºÐ¸Ð¹ Ð¼Ð¾ÑÑ‚', 'ðŸ¦ ÐÐ¾Ð²Ð¾ÑÐ¸Ð±Ð¸Ñ€ÑÐºÐ¸Ð¹ Ð·Ð¾Ð¾Ð¿Ð°Ñ€Ðº', 'ðŸ”¬ ÐÐºÐ°Ð´ÐµÐ¼Ð³Ð¾Ñ€Ð¾Ð´Ð¾Ðº', 'â›ª Ð¡Ð¾Ð±Ð¾Ñ€ ÐÐ»ÐµÐºÑÐ°Ð½Ð´Ñ€Ð° ÐÐµÐ²ÑÐºÐ¾Ð³Ð¾', 'ðŸŒ† ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ Ð›ÐµÐ½Ð¸Ð½Ð°'],\n  'ÐÐ¸Ð¶Ð½Ð¸Ð¹ ÐÐ¾Ð²Ð³Ð¾Ñ€Ð¾Ð´': ['ðŸ° ÐÐ¸Ð¶ÐµÐ³Ð¾Ñ€Ð¾Ð´ÑÐºÐ¸Ð¹ ÐºÑ€ÐµÐ¼Ð»ÑŒ', 'ðŸŒŠ Ð¡Ñ‚Ñ€ÐµÐ»ÐºÐ° (ÑÐ»Ð¸ÑÐ½Ð¸Ðµ Ð’Ð¾Ð»Ð³Ð¸ Ð¸ ÐžÐºÐ¸)', 'ðŸš¡ ÐšÐ°Ð½Ð°Ñ‚Ð½Ð°Ñ Ð´Ð¾Ñ€Ð¾Ð´Ð° Ñ‡ÐµÑ€ÐµÐ· Ð’Ð¾Ð»Ð³Ñƒ', 'ðŸ› ÐœÑƒÐ·ÐµÐ¹-ÐºÐ²Ð°Ñ€Ñ‚Ð¸Ñ€Ð° Ð“Ð¾Ñ€ÑŒÐºÐ¾Ð³Ð¾', 'ðŸŒ† Ð‘Ð¾Ð»ÑŒÑˆÐ°Ñ ÐŸÐ¾ÐºÑ€Ð¾Ð²ÑÐºÐ°Ñ ÑƒÐ»Ð¸Ñ†Ð°', 'â›ª Ð‘Ð»Ð°Ð³Ð¾Ð²ÐµÑ‰ÐµÐ½ÑÐºÐ¸Ð¹ Ð¼Ð¾Ð½Ð°ÑÑ‚Ñ‹Ñ€ÑŒ', 'ðŸŽ­ Ð¢ÐµÐ°Ñ‚Ñ€ Ð´Ñ€Ð°Ð¼Ñ‹'],\n  'Ð¡Ð¾Ñ‡Ð¸': ['ðŸ– ÐŸÐ»ÑÐ¶Ð¸ Ð§ÐµÑ€Ð½Ð¾Ð³Ð¾ Ð¼Ð¾Ñ€Ñ', 'ðŸ” Ð Ð¾Ð·Ð° Ð¥ÑƒÑ‚Ð¾Ñ€', 'ðŸŒ³ Ð”ÐµÐ½Ð´Ñ€Ð°Ñ€Ð¸Ð¹', 'ðŸŸ ÐžÐ»Ð¸Ð¼Ð¿Ð¸Ð¹ÑÐºÐ¸Ð¹ Ð¿Ð°Ñ€Ðº', 'ðŸž ÐÐ³ÑƒÑ€ÑÐºÐ¸Ðµ Ð²Ð¾Ð´Ð¾Ð¿Ð°Ð´Ñ‹', 'ðŸŽ¡ Ð¡Ð¾Ñ‡Ð¸ ÐŸÐ°Ñ€Ðº', 'ðŸ› Ð—Ð¸Ð¼Ð½Ð¸Ð¹ Ñ‚ÐµÐ°Ñ‚Ñ€'],\n  'default': ['ðŸ› Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ†ÐµÐ½Ñ‚Ñ€ Ð³Ð¾Ñ€Ð¾Ð´Ð°', 'ðŸ° ÐœÐµÑÑ‚Ð½Ñ‹Ð¹ Ð¼ÑƒÐ·ÐµÐ¹', 'ðŸŒ³ Ð“Ð¾Ñ€Ð¾Ð´ÑÐºÐ¾Ð¹ Ð¿Ð°Ñ€Ðº', 'ðŸŒ† Ð¡Ð¼Ð¾Ñ‚Ñ€Ð¾Ð²Ð°Ñ Ð¿Ð»Ð¾Ñ‰Ð°Ð´ÐºÐ°', 'ðŸŽ­ Ð”Ñ€Ð°Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ‚ÐµÐ°Ñ‚Ñ€']\n};\n\nconst hotels = ['ðŸ¨ ÐŸÑ€ÐµÐ¼Ð¸ÑƒÐ¼ Ð¾Ñ‚ÐµÐ»ÑŒ - Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³ 4.8/5, Ð¾Ñ‚ 4000â‚½/Ð½Ð¾Ñ‡ÑŒ', 'ðŸ¨ Ð“Ð¾ÑÑ‚Ð¸Ð½Ð¸Ñ†Ð° Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð°Ñ - Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³ 4.5/5, Ð¾Ñ‚ 2800â‚½/Ð½Ð¾Ñ‡ÑŒ', 'ðŸ¨ Ð‘Ð¸Ð·Ð½ÐµÑ-Ð¾Ñ‚ÐµÐ»ÑŒ ÐšÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚ - Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³ 4.3/5, Ð¾Ñ‚ 2200â‚½/Ð½Ð¾Ñ‡ÑŒ', 'ðŸ¨ ÐÐ¿Ð°Ñ€Ñ‚-Ð¾Ñ‚ÐµÐ»ÑŒ Ð£ÑŽÑ‚Ð½Ñ‹Ð¹ - Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³ 4.2/5, Ð¾Ñ‚ 1800â‚½/Ð½Ð¾Ñ‡ÑŒ'];\n\nconst cinema = ['ðŸŽ¬ ÐšÐ¸Ð½Ð¾Ñ‚ÐµÐ°Ñ‚Ñ€ ÐŸÑ€ÐµÐ¼ÑŒÐµÑ€ - Ð½Ð¾Ð²Ð¸Ð½ÐºÐ¸ ÐºÐ¸Ð½Ð¾, IMAX', 'ðŸŽ¬ ÐÑ€Ñ‚-ÐºÐ¸Ð½Ð¾ Ñ†ÐµÐ½Ñ‚Ñ€ - Ð°Ð²Ñ‚Ð¾Ñ€ÑÐºÐ¾Ðµ Ð¸ Ð½ÐµÐ·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾Ðµ ÐºÐ¸Ð½Ð¾', 'ðŸŽ¬ ÐœÑƒÐ»ÑŒÑ‚Ð¸Ð¿Ð»ÐµÐºÑ - Ð²ÑÐµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ‹, 3D, 4DX'];\n\nreturn {\n  city: city,\n  telegram_id: telegram_id,\n  location_code: locationCode,\n  summary: summary,\n  attractions: attractions[city] || attractions['default'],\n  hotels: hotels,\n  cinema: cinema,\n  date_from: date_from,\n  date_to: date_to\n};"
      },
      "id": "process-data",
      "name": "Process Data",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [460, 400]
    },
    {
      "parameters": {
        "url": "=https://kudago.com/public-api/v1.4/events/?location={{$json.location_code}}&page_size=10&fields=id,title,place,dates,description,price,images,site_url",
        "options": {}
      },
      "id": "get-kudago-events",
      "name": "Get KudaGo Events",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [680, 300]
    },
    {
      "parameters": {
        "jsCode": "// ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ñ… ÑƒÐ·Ð»Ð¾Ð²\nconst processData = $('Process Data').item.json;\nconst kudagoResponse = $json;\n\n// ÐŸÐ°Ñ€ÑÐ¸Ð¼ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð¸Ð· KudaGo\nconst kudagoEvents = kudagoResponse.results || [];\n\n// Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ\nconst formattedEvents = kudagoEvents.slice(0, 10).map(event => {\n  // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð´Ð°Ñ‚Ñƒ\n  let eventDate = processData.date_from;\n  if (event.dates && event.dates.length > 0 && event.dates[0].start) {\n    eventDate = new Date(event.dates[0].start * 1000).toISOString();\n  }\n\n  // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¼ÐµÑÑ‚Ð¾\n  let venue = 'ÐœÐµÑÑ‚Ð¾ ÑƒÑ‚Ð¾Ñ‡Ð½ÑÐµÑ‚ÑÑ';\n  if (event.place && event.place.title) {\n    venue = event.place.title;\n  } else if (event.place && typeof event.place === 'string') {\n    venue = event.place;\n  }\n\n  // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ†ÐµÐ½Ñƒ\n  let price = event.price || event.is_free ? 'Ð‘ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾' : 'Ð£Ñ‚Ð¾Ñ‡Ð½ÑÐ¹Ñ‚Ðµ';\n  if (event.price && event.price.includes('-')) {\n    price = `ÐžÑ‚ ${event.price.split('-')[0]}â‚½`;\n  }\n\n  return {\n    title: event.title || 'Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ðµ',\n    venue: venue,\n    date: eventDate,\n    price: price,\n    description: event.description ? event.description.substring(0, 200) : '',\n    url: event.site_url || ''\n  };\n});\n\n// Ð•ÑÐ»Ð¸ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð½ÐµÑ‚, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ mock\nconst finalEvents = formattedEvents.length > 0 ? formattedEvents : [\n  { title: 'ÐšÐ¾Ð½Ñ†ÐµÑ€Ñ‚ ÐºÐ»Ð°ÑÑÐ¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð¼ÑƒÐ·Ñ‹ÐºÐ¸', venue: 'ÐšÐ¾Ð½Ñ†ÐµÑ€Ñ‚Ð½Ñ‹Ð¹ Ð·Ð°Ð» Ð¤Ð¸Ð»Ð°Ñ€Ð¼Ð¾Ð½Ð¸Ñ', date: processData.date_from, price: 'ÐžÑ‚ 500â‚½' },\n  { title: 'Ð’Ñ‹ÑÑ‚Ð°Ð²ÐºÐ° ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¸ÑÐºÑƒÑÑÑ‚Ð²Ð°', venue: 'Ð“Ð°Ð»ÐµÑ€ÐµÑ ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¸ÑÐºÑƒÑÑÑ‚Ð²Ð°', date: processData.date_from, price: '300â‚½' },\n  { title: 'Ð¢ÐµÐ°Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°', venue: 'Ð”Ñ€Ð°Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ‚ÐµÐ°Ñ‚Ñ€', date: processData.date_to, price: 'ÐžÑ‚ 800â‚½' },\n  { title: 'Stand-up ÐºÐ¾Ð¼ÐµÐ´Ð¸Ñ', venue: 'Comedy Club', date: processData.date_from, price: 'ÐžÑ‚ 1200â‚½' }\n];\n\n// Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ Ñ„Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚\nreturn {\n  success: true,\n  city: processData.city,\n  telegram_id: processData.telegram_id,\n  location_code: processData.location_code,\n  summary: processData.summary,\n  events: finalEvents,\n  attractions: processData.attractions,\n  hotels: processData.hotels,\n  cinema: processData.cinema,\n  kudago_api_used: formattedEvents.length > 0\n};"
      },
      "id": "format-response",
      "name": "Format Response",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 400]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {}
      },
      "id": "respond-node",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [1120, 400]
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Process Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Data": {
      "main": [
        [
          {
            "node": "Get KudaGo Events",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get KudaGo Events": {
      "main": [
        [
          {
            "node": "Format Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Response": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-01-22T00:00:00.000Z",
  "versionId": ""
}
